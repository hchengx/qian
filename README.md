Mulit-thread network framework in C++